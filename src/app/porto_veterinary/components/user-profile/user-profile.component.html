<div class="body">
  <div class="container mt-0">
    <div class="main-body pt-3">
      <div class="row gutters-sm">
        <div class="col-md-3 mb-3">
          <div class="card">
            <div class="card-body">
              <div class="d-flex flex-column align-items-center text-center">
                <img
                  src="https://bootdey.com/img/Content/avatar/avatar7.png"
                  alt="Admin"
                  class="rounded-circle"
                  width="100"
                />
                <div class="mt-3">
                  <h4>{{ userData.name }}</h4>
                  <p class="text-secondary mb-1">{{ userData.phone }}</p>
                  <p class="text-muted font-size-sm">{{ userData.email }}</p>
                  <div class="d-flex">
                    <button
                      type="button"
                      class="btn btn-success me-3"
                      routerLink="/mycenters"
                      *ngIf="havevet()"
                    >
                      my Centers
                    </button>
                    <button
                      type="button"
                      class="btn btn-success"
                      data-bs-toggle="modal"
                      data-bs-target="#exampleModal"
                      *ngIf="!havevet()"
                    >
                      Add Your Center
                    </button>
                  </div>

                  <!-- Start Add Modal -->
                  <div
                    class="modal fade"
                    id="exampleModal"
                    tabindex="-1"
                    aria-labelledby="exampleModalLabel"
                    aria-hidden="true"
                  >
                    <div class="modal-dialog update-modal">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h1 class="modal-title fs-5" id="exampleModalLabel">
                            Add your New vet
                          </h1>
                          <button
                            type="button"
                            class="btn-close"
                            data-bs-dismiss="modal"
                            aria-label="Close"
                          ></button>
                        </div>
                        <div class="modal-body">
                          <form
                            [formGroup]="vetCenterFormstore"
                            (ngSubmit)="onAddVet()"
                            class="professional-form"
                          >
                            <!-- Veterinary Center Name -->
                            <div class="form-group">
                              <label for="name">Veterinary Center Name</label>
                              <input
                                name="name"
                                type="text"
                                class="form-control"
                                id="name"
                                formControlName="name"
                              />
                              <div
                                *ngIf="
                                  vetCenterFormstore.controls['name'].touched &&
                                  vetCenterFormstore.controls['name'].invalid
                                "
                                id="name_help"
                                class="text-danger form-text"
                              >
                                <small
                                  *ngIf="vetCenterFormstore.controls['name'].errors?.['required']"
                                >
                                  this field is required
                                </small>
                                <small
                                  *ngIf="vetCenterFormstore.controls['name'].errors?.['minlength']"
                                >
                                  Min. length is 2
                                </small>
                              </div>
                            </div>

                            <!-- Location Information -->
                            <div class="form-group">
                              <label for="street_address">Street Address</label>
                              <input
                                name="street_address"
                                type="text"
                                class="form-control"
                                id="street_address"
                                formControlName="street_address"
                              />

                              <div
                                *ngIf="
                                  vetCenterFormstore.controls['street_address']
                                    .touched &&
                                  vetCenterFormstore.controls['street_address']
                                    .invalid
                                "
                                id="name_help"
                                class="text-danger form-text"
                              >
                                <small
                                  *ngIf="vetCenterFormstore.controls['street_address'].errors?.['required']"
                                >
                                  this field is required
                                </small>
                              </div>
                            </div>
                            <!-- governorate -->
                            <div class="mb-3">
                              <label
                                for="governorate"
                                class="form-label governorate"
                                >governorate</label
                              >
                              <select
                                name="governorate"
                                class="form-select"
                                id="location"
                                formControlName="governorate"
                              >
                                <option value="" disabled selected>
                                  Select a governorate
                                </option>
                                <option
                                  *ngFor="let governorate of cities"
                                  [value]="governorate"
                                >
                                  {{ governorate }}
                                </option>
                              </select>
                            </div>
                            <!-- ... Logo ... -->
                            <div class="form-group">
                              <label for="license">Logo</label>
                              <div
                                class="input-group mb-3 px-2 py-2 rounded-pill bg-white shadow-sm"
                              >
                                <input
                                  name="logo"
                                  id="upload"
                                  type="file"
                                  (change)="get_imag_logo($event)"
                                  class="form-control border-0"
                                  formControlName="logo"
                                />
                                <label
                                  id="upload-label"
                                  for="logo"
                                  class="font-weight-light text-muted"
                                  >Choose file</label
                                >
                                <div class="input-group-append">
                                  <label
                                    for="logo"
                                    class="btn btn-light m-0 rounded-pill px-4"
                                  >
                                    <i
                                      class="fa fa-cloud-upload mr-2 text-muted"
                                    ></i
                                    ><small
                                      class="text-uppercase font-weight-bold text-muted"
                                      >Choose file</small
                                    ></label
                                  >
                                </div>
                              </div>
                              <div class="image-area mt-4">
                                <img
                                  id="imageResult"
                                  src="{{ logoBase64 }}"
                                  alt=""
                                  class="img-fluid rounded shadow-sm mx-auto d-block"
                                />
                              </div>
                              <div
                                *ngIf="
                                  vetCenterFormstore.controls['logo'].touched &&
                                  vetCenterFormstore.controls['logo'].invalid
                                "
                                id="name_help"
                                class="text-danger form-text"
                              >
                                <small
                                  *ngIf="vetCenterFormstore.controls['logo'].errors?.['required']"
                                >
                                  this field is required
                                </small>
                              </div>
                            </div>
                            <!-- About the Center -->
                            <div class="form-group mt-3">
                              <label for="about">About the Center</label>
                              <textarea
                                name="about"
                                class="form-control"
                                id="about"
                                formControlName="about"
                                rows="4"
                              ></textarea>
                              <div
                                *ngIf="
                                  vetCenterFormstore.controls['about']
                                    .touched &&
                                  vetCenterFormstore.controls['about'].invalid
                                "
                                id="name_help"
                                class="text-danger form-text"
                              >
                                <small
                                  *ngIf="vetCenterFormstore.controls['about'].errors?.['required']"
                                >
                                  this field is required
                                </small>
                              </div>
                            </div>
                            <!-- License -->
                            <div class="form-group">
                              <label for="license">License</label>
                              <div
                                class="input-group mb-3 px-2 py-2 rounded-pill bg-white shadow-sm"
                              >
                                <input
                                  name="license"
                                  id="upload"
                                  type="file"
                                  (change)="get_image_license($event)"
                                  class="form-control border-0"
                                  formControlName="license"
                                />
                                <label
                                  id="upload-label"
                                  for="license"
                                  class="font-weight-light text-muted"
                                  >Choose file</label
                                >
                                <div class="input-group-append">
                                  <label
                                    for="license"
                                    class="btn btn-light m-0 rounded-pill px-4"
                                  >
                                    <i
                                      class="fa fa-cloud-upload mr-2 text-muted"
                                    ></i
                                    ><small
                                      class="text-uppercase font-weight-bold text-muted"
                                      >Choose file</small
                                    ></label
                                  >
                                </div>
                              </div>
                              <div class="image-area mt-4">
                                <img
                                  name="license"
                                  id="imageResult"
                                  src="{{ licenseBase64 }}"
                                  alt=""
                                  class="img-fluid rounded shadow-sm mx-auto d-block"
                                />
                              </div>
                              <div
                                *ngIf="
                                  vetCenterFormstore.controls['license']
                                    .touched &&
                                  vetCenterFormstore.controls['license'].invalid
                                "
                                id="name_help"
                                class="text-danger form-text"
                              >
                                <small
                                  *ngIf="vetCenterFormstore.controls['license'].errors?.['required']"
                                >
                                  this field is required
                                </small>
                              </div>
                            </div>
                            <!-- Operating open Hours -->
                            <div class="form-group">
                              <label for="open_at">Operating open Hours</label>
                              <input
                                name="open_at"
                                type="text"
                                class="form-control"
                                id="open_at"
                                required
                                formControlName="open_at"
                              />
                              <small class="text-danger">
                                Please enter the date in this form HH:MM
                                AM/PM</small
                              >
                              <div
                                *ngIf="
                                  vetCenterFormstore.controls['open_at']
                                    .touched &&
                                  vetCenterFormstore.controls['open_at'].invalid
                                "
                                id="name_help"
                                class="text-danger form-text"
                              >
                                <small
                                  *ngIf="vetCenterFormstore.controls['open_at'].errors?.['required']"
                                >
                                  this field is required
                                </small>
                              </div>
                            </div>

                            <!-- Operating close Hours -->
                            <div class="form-group">
                              <label for="close_at"
                                >Operating close Hours</label
                              >
                              <input
                                name="close_at"
                                id="appt-time"
                                type="text"
                                name="appt-time"
                                class="form-control"
                                id="close_at"
                                formControlName="close_at"
                              />
                              <small class="text-danger">
                                Please enter the date in this form HH:MM
                                AM/PM</small
                              >
                              <div
                                *ngIf="
                                  vetCenterFormstore.controls['close_at']
                                    .touched &&
                                  vetCenterFormstore.controls['close_at']
                                    .invalid
                                "
                                id="name_help"
                                class="text-danger form-text"
                              >
                                <small
                                  *ngIf="vetCenterFormstore.controls['close_at'].errors?.['required']"
                                >
                                  this field is required
                                </small>
                              </div>
                            </div>
                            <!-- Tax Record -->
                            <div class="form-group">
                              <label for="tax_record">Tax Record</label>
                              <div
                                class="input-group mb-3 px-2 py-2 rounded-pill bg-white shadow-sm"
                              >
                                <input
                                  name="tax_record"
                                  id="upload"
                                  type="file"
                                  (change)="get_image_tax($event)"
                                  class="form-control border-0"
                                  formControlName="tax_record"
                                />
                                <label
                                  id="upload-label"
                                  for="tax_record"
                                  class="font-weight-light text-muted"
                                  >Choose file</label
                                >
                                <div class="input-group-append">
                                  <label
                                    for="tax_record"
                                    class="btn btn-light m-0 rounded-pill px-4"
                                  >
                                    <i
                                      class="fa fa-cloud-upload mr-2 text-muted"
                                    ></i
                                    ><small
                                      class="text-uppercase font-weight-bold text-muted"
                                      >Choose file</small
                                    ></label
                                  >
                                </div>
                              </div>
                              <div class="image-area mt-4">
                                <img
                                  name="tax_record"
                                  id="imageResult"
                                  src="{{ taxBase64 }}"
                                  alt=""
                                  class="img-fluid rounded shadow-sm mx-auto d-block"
                                />
                              </div>
                              <div
                                *ngIf="
                                  vetCenterFormstore.controls['tax_record']
                                    .touched &&
                                  vetCenterFormstore.controls['tax_record']
                                    .invalid
                                "
                                id="name_help"
                                class="text-danger form-text"
                              >
                                <small
                                  *ngIf="vetCenterFormstore.controls['tax_record'].errors?.['required']"
                                >
                                  this field is required
                                </small>
                              </div>
                            </div>

                            <!-- Commercial Record -->
                            <div class="form-group">
                              <label for="commercial_record"
                                >Commercial Record</label
                              >
                              <div
                                class="input-group mb-3 px-2 py-2 rounded-pill bg-white shadow-sm"
                              >
                                <input
                                  name="commercial_record"
                                  id="upload"
                                  type="file"
                                  (change)="get_image_commrec($event)"
                                  class="form-control border-0"
                                  formControlName="commercial_record"
                                />
                                <label
                                  id="upload-label"
                                  for="commercial_record"
                                  class="font-weight-light text-muted"
                                  >Choose file</label
                                >
                                <div class="input-group-append">
                                  <label
                                    for="commercial_record"
                                    class="btn btn-light m-0 rounded-pill px-4"
                                  >
                                    <i
                                      class="fa fa-cloud-upload mr-2 text-muted"
                                    ></i
                                    ><small
                                      class="text-uppercase font-weight-bold text-muted"
                                      >Choose file</small
                                    ></label
                                  >
                                </div>
                              </div>
                              <div class="image-area mt-4">
                                <img
                                  name="commercial_record"
                                  id="imageResult"
                                  src="{{ commercialBasde64 }}"
                                  alt=""
                                  class="img-fluid rounded shadow-sm mx-auto d-block"
                                />
                              </div>
                              <div
                                *ngIf="
                                  vetCenterFormstore.controls[
                                    'commercial_record'
                                  ].touched &&
                                  vetCenterFormstore.controls[
                                    'commercial_record'
                                  ].invalid
                                "
                                id="name_help"
                                class="text-danger form-text"
                              >
                                <small
                                  *ngIf="vetCenterFormstore.controls['commercial_record'].errors?.['required']"
                                >
                                  this field is required
                                </small>
                              </div>
                            </div>

                            <div class="modal-footer">
                              <button
                                type="button"
                                class="btn btn-secondary"
                                data-bs-dismiss="modal"
                              >
                                Close
                              </button>
                              <!-- Submit Button -->

                              <button
                                type="submit"
                                class="btn btn-primary"
                                data-bs-dismiss="modal"
                                [disabled]="vetCenterFormstore.invalid"
                              >
                                Save changes
                              </button>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- end Add Modal -->
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-8 ms-3">
          <div class="card mb-3">
            <div class="">
              <div class="row">
                <table class="table mb-0">
                  <thead>
                    <tr class="text-center">
                      <th>Name</th>
                      <th>Pet</th>
                      <th>date</th>
                      <th>time</th>
                      <th>Status</th>
                      <th>Accept</th>
                      <th>Reject</th>
                      <th>Delete</th>
                    </tr>
                  </thead>
                  <tbody class="table-group-divider text-center">
                    <tr *ngFor="let app of apps">
                      <td>{{ app.user.name }}</td>
                      <td>{{ app.pet_type }}</td>
                      <td>{{ app.date }}</td>
                      <td>{{ app.time }}</td>
                      <td rejectModalToggle class="text-success">
                        <p
                          class="text-success"
                          *ngIf="app.status == 'accepted'"
                        >
                          Accepted
                        </p>
                        <p class="text-danger" *ngIf="app.status == 'rejected'">
                          Rejected
                        </p>
                        <p *ngIf="app.status == 'wait'" class="waiting">
                          Wait for action
                        </p>
                      </td>
                      <!-- start accept mail -->
                      <td rejectModalToggle>
                        <button
                          *ngIf="app.status == 'wait'"
                          class="btn btn-success"
                          [attr.data-bs-target]="'#acceptModalToggle' + app.id"
                          data-bs-toggle="modal"
                        >
                          Accept
                        </button>

                        <!-- start modal -->
                        <div
                          class="modal fade"
                          id="acceptModalToggle{{ app.id }}"
                          aria-hidden="true"
                          aria-labelledby="exampleModalToggleLabel"
                          tabindex="-1"
                        >
                          <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h1
                                  class="modal-title fs-5"
                                  id="exampleModalToggleLabel"
                                >
                                  acceptmail
                                </h1>
                                <button
                                  type="button"
                                  class="btn-close"
                                  data-bs-dismiss="modal"
                                  aria-label="Close"
                                ></button>
                              </div>
                              <div class="modal-body">
                                We will send accept mail to your customer email
                                address
                              </div>
                              <div class="modal-footer">
                                <button
                                  class="btn btn-success"
                                  data-bs-target="#acceptModalToggle2"
                                  data-bs-toggle="modal"
                                  (click)="acceptmail(app.id)"
                                >
                                  Done
                                </button>
                                <button
                                  class="btn btn-danger"
                                  data-bs-target="#exampleModalToggle2"
                                  data-bs-dismiss="modal"
                                >
                                  Cancel
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div
                          class="modal fade"
                          id="acceptModalToggle2"
                          aria-hidden="true"
                          aria-labelledby="exampleModalToggleLabel2"
                          tabindex="-1"
                        >
                          <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h1
                                  class="modal-title fs-5"
                                  id="exampleModalToggleLabel2"
                                >
                                  Done
                                </h1>
                                <button
                                  type="button"
                                  class="btn-close"
                                  data-bs-dismiss="modal"
                                  aria-label="Close"
                                ></button>
                              </div>
                              <div class="modal-body">
                                Email Send Successfuly
                              </div>
                              <div class="modal-footer">
                                <button
                                  class="btn btn-primary"
                                  data-bs-dismiss="modal"
                                >
                                  close
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!-- end modal -->
                      </td>
                      <!-- end accept mail -->

                      <!-- start reject mail -->
                      <td rejectModalToggle>
                        <button
                          class="btn btn-danger"
                          [attr.data-bs-target]="'#rejectModalToggle' + app.id"
                          data-bs-toggle="modal"
                          *ngIf="app.status == 'wait'"
                        >
                          Reject
                        </button>
                        <div
                          class="modal fade"
                          id="rejectModalToggle{{ app.id }}"
                          aria-hidden="true"
                          aria-labelledby="exampleModalToggleLabel"
                          tabindex="-1"
                        >
                          <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h1
                                  class="modal-title fs-5"
                                  id="exampleModalToggleLabel"
                                >
                                  rejectmail
                                </h1>
                                <button
                                  type="button"
                                  class="btn-close"
                                  data-bs-dismiss="modal"
                                  aria-label="Close"
                                ></button>
                              </div>
                              <div class="modal-body">
                                We will send email with Reject for the client.
                              </div>
                              <div class="modal-footer">
                                <button
                                  class="btn btn-success"
                                  data-bs-target="#rejectModalToggle2"
                                  data-bs-toggle="modal"
                                  (click)="rejectmail(app.id)"
                                >
                                  Done
                                </button>
                                <button
                                  class="btn btn-danger"
                                  data-bs-target="#exampleModalToggle2"
                                  data-bs-dismiss="modal"
                                >
                                  Cancel
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div
                          class="modal fade"
                          id="rejectModalToggle2"
                          aria-hidden="true"
                          aria-labelledby="exampleModalToggleLabel2"
                          tabindex="-1"
                        >
                          <div class="modal-dialog modal-dialog-centered">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h1
                                  class="modal-title fs-5"
                                  id="exampleModalToggleLabel2"
                                >
                                  Done
                                </h1>
                                <button
                                  type="button"
                                  class="btn-close"
                                  data-bs-dismiss="modal"
                                  aria-label="Close"
                                ></button>
                              </div>
                              <div class="modal-body">
                                Email Send Successfuly
                              </div>
                              <div class="modal-footer">
                                <button
                                  class="btn btn-primary"
                                  data-bs-dismiss="modal"
                                >
                                  close
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </td>
                      <!-- end reject mail -->
                      <td *ngIf="app.status == 'rejected'">
                        <!-- Start Modal Delete -->

                        <button
                          class="btn btn-danger mx-2"
                          data-bs-toggle="modal"
                          data-bs-target="#DeleteModaldoc"
                          (click)="deleteAppoint(app.id)"
                        >
                          Delete
                        </button>
                        <div
                          class="modal fade"
                          id="DeleteModaldoc"
                          tabindex="-1"
                          aria-labelledby="exampleModalLabel"
                          aria-hidden="true"
                        >
                          <div class="modal-dialog">
                            <div class="modal-content">
                              <div class="modal-body">
                                <div
                                  class="alert alert-warning alert-dismissible fade show"
                                  role="alert"
                                >
                                  are you sure that you want to delete this
                                  Appointment ?
                                </div>
                              </div>
                              <div class="modal-footer">
                                <button
                                  type="button"
                                  class="btn btn-secondary"
                                  data-bs-dismiss="modal"
                                >
                                  Close
                                </button>
                                <button
                                  type="button"
                                  class="btn btn-danger"
                                  data-bs-dismiss="modal"
                                  (click)="modaldeleteAppoint()"
                                >
                                  confirme
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!-- End Modal Delete -->
                      </td>
                      <td *ngIf="app.status == 'accepted'">
                        <!-- Start Modal Delete -->

                        <button
                          class="btn btn-danger mx-2"
                          data-bs-toggle="modal"
                          data-bs-target="#DeleteModaldoc"
                          (click)="deleteAppoint(app.id)"
                        >
                          Delete
                        </button>
                        <div
                          class="modal fade"
                          id="DeleteModaldoc"
                          tabindex="-1"
                          aria-labelledby="exampleModalLabel"
                          aria-hidden="true"
                        >
                          <div class="modal-dialog">
                            <div class="modal-content">
                              <div class="modal-body">
                                <div
                                  class="alert alert-warning alert-dismissible fade show"
                                  role="alert"
                                >
                                  are you sure that you want to delete this
                                  Appointment ?
                                </div>
                              </div>
                              <div class="modal-footer">
                                <button
                                  type="button"
                                  class="btn btn-secondary"
                                  data-bs-dismiss="modal"
                                >
                                  Close
                                </button>
                                <button
                                  type="button"
                                  class="btn btn-danger"
                                  data-bs-dismiss="modal"
                                  (click)="modaldeleteAppoint()"
                                >
                                  confirme
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                        <!-- End Modal Delete -->
                      </td>
                      <td *ngIf="app.status == 'wait'">
                        <p class="fw-900 text-warning waiting">Wait Action</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
